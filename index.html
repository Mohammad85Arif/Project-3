<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Number Match â€” Drag & Drop</title>
  <style>
    body { background:#0f1724; color:#e6eef8; font-family:sans-serif; margin:0; padding:20px; }
    h1 { font-size:20px; margin-bottom:16px; }
    .board, .palette { padding:20px; border-radius:10px; background:rgba(255,255,255,0.05); margin-bottom:20px; }
    .slots { display:flex; gap:12px; margin-bottom:12px; }
    .slot { flex:1; min-height:80px; border:2px dashed #aaa; border-radius:10px;
            display:flex; align-items:center; justify-content:center; position:relative; }
    .slot.correct { border-color:#4ade80; background:rgba(74,222,128,0.1); }
    .slot-label { position:absolute; top:4px; left:6px; font-size:12px; color:#94a3b8; }
    .balls { display:flex; gap:12px; flex-wrap:wrap; }
    .ball { width:64px; height:64px; border-radius:50%; background:#3498db;
            display:flex; align-items:center; justify-content:center;
            font-weight:bold; font-size:20px; color:#fff; cursor:grab;
            box-shadow:0 4px 10px rgba(0,0,0,0.4); }
    .ball:active { cursor:grabbing; }
    .ball.placed { opacity:0.6; cursor:default; }
    .status { margin-top:10px; color:#94a3b8; }
    .message { margin-top:10px; padding:8px; border-radius:8px;
               background:rgba(255,255,255,0.08); color:#60a5fa; font-weight:600; }
  </style>
</head>
<body>
  <h1>Place the balls into matching slots (1â€“5)</h1>
  <button id="resetBtn">Reset</button>
  <button id="hintBtn">Show Hint</button>

  <div class="board" id="board">
    <div class="slots" id="slots" aria-label="Target slots">
      <!-- slots injected here -->
    </div>
    <div class="status" id="status">Drag each numbered ball into the slot with the same number.</div>
    <div class="message" id="message" style="display:none"></div>
  </div>

  <aside class="palette" id="palette" aria-label="Ball palette">
    <div style="text-align:center;margin-bottom:8px;color:#94a3b8">Drag these balls into the slots</div>
    <div class="balls" id="balls">
      <!-- balls injected here -->
    </div>
  </aside>

  <script>
    // Game config
    const COUNT = 5;

    // DOM refs
    const slotsEl = document.getElementById('slots');
    const ballsEl = document.getElementById('balls');
    const resetBtn = document.getElementById('resetBtn');
    const hintBtn = document.getElementById('hintBtn');
    const status = document.getElementById('status');
    const message = document.getElementById('message');

    let state = { placed: 0 };

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]
      }
      return arr;
    }

    function createSlots(){
      slotsEl.innerHTML='';
      for(let i=1;i<=COUNT;i++){
        const slot = document.createElement('div');
        slot.className='slot';
        slot.dataset.slot = i;
        slot.innerHTML = `<div class="slot-label">Slot ${i}</div>`;
        slot.addEventListener('dragover', onDragOver);
        slot.addEventListener('drop', onDrop);
        slotsEl.appendChild(slot);
      }
    }

    function createBalls(){
      ballsEl.innerHTML='';
      const numbers = shuffle(Array.from({length:COUNT},(_,i)=>i+1));
      numbers.forEach(n=>{
        const b = document.createElement('div');
        b.className='ball';
        b.draggable = true;
        b.tabIndex = 0;
        b.dataset.number = n;
        b.id = 'ball-'+n;
        b.textContent = n;
        b.addEventListener('dragstart', onDragStart);
        b.addEventListener('dragend', onDragEnd);
        b.addEventListener('pointerdown', onPointerDown);
        ballsEl.appendChild(b);
      });
    }

    let dragged = null;
    function onDragStart(e){
      dragged = e.target;
      e.dataTransfer.setData('text/plain', e.target.dataset.number);
      e.dataTransfer.effectAllowed = 'move';
    }
    function onDragEnd(){ dragged = null; }
    function onDragOver(e){ e.preventDefault(); e.dataTransfer.dropEffect='move'; }

    function onDrop(e){
      e.preventDefault();
      const slot = e.currentTarget;
      const num = e.dataTransfer.getData('text/plain');
      attemptPlace(slot, Number(num));
    }

    function attemptPlace(slotEl, num){
      if(!slotEl || slotEl.dataset.taken) return;
      const slotNum = Number(slotEl.dataset.slot);
      const ballEl = document.querySelector('#ball-'+num);
      if(!ballEl) return;

      if(slotNum === num){
        slotEl.classList.add('correct');
        slotEl.dataset.taken = num;
        ballEl.classList.add('placed');
        ballEl.draggable = false;
        ballEl.style.pointerEvents = 'none';
        ballEl.remove();
        slotEl.appendChild(ballEl);
        state.placed++;
        status.textContent = `Placed ${state.placed}/${COUNT} correctly.`;
        if(state.placed === COUNT){ showWin(); }
      } else {
        animateWrong(ballEl);
        flashMessage('Wrong slot â€” try again', 1200);
      }
    }

    function animateWrong(el){
      if(!el) return;
      el.animate([
        { transform: 'translateX(0px)' },
        { transform: 'translateX(-10px)' },
        { transform: 'translateX(8px)' },
        { transform: 'translateX(0px)' }
      ],{ duration: 300, easing: 'ease-out' });
    }

    function showWin(){
      message.style.display='block';
      message.textContent = 'Nice! All balls are in the correct slots. ðŸŽ‰';
      status.textContent = 'Completed.';
    }

    function flashMessage(txt,ms=1000){
      message.style.display='block';
      message.textContent = txt;
      setTimeout(()=>{ message.style.display='none'; }, ms);
    }

    function resetGame(){
      state.placed = 0;
      message.style.display='none';
      status.textContent = 'Drag each numbered ball into the slot with the same number.';
      createSlots();
      createBalls();
    }

    resetBtn.addEventListener('click', resetGame);

    hintBtn.addEventListener('click', ()=>{
      const unplaced = Array.from(document.querySelectorAll('.ball:not(.placed)'));
      unplaced.forEach(b=>{
        const n = b.dataset.number;
        const slot = document.querySelector(`.slot[data-slot='${n}']`);
        if(slot){
          slot.animate([
            { boxShadow: '0 0 0px rgba(96,165,250,0)' },
            { boxShadow: '0 0 12px rgba(96,165,250,0.5)' },
            { boxShadow: '0 0 0px rgba(96,165,250,0)' }
          ], { duration: 800 });
        }
      });
    });

    function onPointerDown(e){
      const el = e.currentTarget;
      if(el.classList.contains('placed')) return;
      el.setPointerCapture(e.pointerId);
      el.style.position='fixed';
      el.style.left = el.getBoundingClientRect().left + 'px';
      el.style.top = el.getBoundingClientRect().top + 'px';
      el.style.zIndex = 9999;

      function onPointerMove(ev){
        el.style.left = (ev.clientX - el.offsetWidth/2) + 'px';
        el.style.top = (ev.clientY - el.offsetHeight/2) + 'px';
      }
      function onPointerUp(ev){
        document.removeEventListener('pointermove', onPointerMove);
        document.removeEventListener('pointerup', onPointerUp);
        el.releasePointerCapture(e.pointerId);
        el.style.zIndex='';
        const dropTarget = document.elementFromPoint(ev.clientX, ev.clientY);
        const slot = dropTarget && dropTarget.closest('.slot');
        if(slot){ attemptPlace(slot, Number(el.dataset.number)); }
        if(!el.classList.contains('placed')){
          el.style.position='';
          el.style.left=''; el.style.top='';
        }
      }
      document.addEventListener('pointermove', onPointerMove);
      document.addEventListener('pointerup', onPointerUp);
    }

    resetGame();
  </script>
</body>
</html>
